(window.webpackJsonpfrontend=window.webpackJsonpfrontend||[]).push([[0],{10:function(e,t,a){"use strict";var n=a(0),s=a.n(n);a(101);t.a=function(e){var t=e.size;console.log(t);var a="sm"===t?"small":"";return s.a.createElement("div",{className:"loader-wrapper "+a},s.a.createElement("div",{className:"loader "+a}))}},101:function(e,t,a){},102:function(e,t,a){},103:function(e,t,a){},104:function(e,t,a){},18:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(8),s=a.n(n),r=function(){return{"x-auth-token":s.a.get("token")}}},197:function(e,t,a){},198:function(e,t,a){},199:function(e,t,a){},200:function(e,t,a){},201:function(e,t,a){},202:function(e,t,a){},203:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(74),c=a.n(r),o=a(1),i=a(3),l=a(4),u=a(6),m=a(5),h=a(7),d=a(13),p=a(16),v=a(8),f=a.n(v),g=a(9),E=a(26),b=a(75),y=a.n(b),N=a(76),T=a.n(N),k=a(77),w=a.n(k),j=(a(94),function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("header",null,s.a.createElement("div",{className:"bg-circle-md bg-circle"}),s.a.createElement("div",{className:"bg-circle-dm bg-circle"}),s.a.createElement("div",{className:"nav"},s.a.createElement("div",{className:"nav-left"},s.a.createElement("img",{className:"light",src:y.a,alt:""}),s.a.createElement("img",{className:"dark",src:T.a,alt:""}),s.a.createElement("h1",null,"EasyTest"))),s.a.createElement("div",{className:"hero"},s.a.createElement("div",{className:"hero-left"},s.a.createElement("h1",null,"Get your experience in online testing to a whole new level!"),s.a.createElement(d.b,{className:"cta",to:"/app/"},"Try it out!")),s.a.createElement("div",{className:"hero-right"},s.a.createElement("img",{src:w.a,alt:""}))),s.a.createElement("div",{className:"copyright"},"\xa9 2020 Yegor Trussov"))}}]),t}(n.Component)),x=function(e){var t=document.querySelector("nav"),a=document.querySelectorAll(".text"),n=document.querySelector("#toggle-view");if(t.classList.toggle("hidden"),a.forEach((function(e){return e.classList.toggle("hidden")})),n.classList.toggle("hidden"),console.log("object"),e){var s=f.a.get("isNavbarHidden");f.a.set("isNavbarHidden",!s)}},O=a(11),S=a(12),C=a(80),L=a.n(C),I=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={isLoggedIn:!1,isHidden:!1},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){!function(){var e=document.querySelector("#toggle-view"),t=f.a.get("isNavbarHidden");console.log(t),t&&x(!1),e.addEventListener("click",(function(){return x(!0)}))}()}},{key:"logout",value:function(){this.context.logout(),window.location.href="/app/login"}},{key:"render",value:function(){this.state.isHiiden;var e=f.a.get("token");console.log(e);var t=""!==e;return s.a.createElement("nav",null,s.a.createElement("div",{className:"toggle-view",id:"toggle-view"},s.a.createElement(O.a,{className:"icon",icon:S.d})),s.a.createElement("div",{className:"nav-item nav-top"},s.a.createElement("a",{href:"/"},s.a.createElement("h2",{className:"logo"},s.a.createElement("img",{src:L.a,alt:""})," ",s.a.createElement("span",{className:"text"},"EasyTest")))),t&&s.a.createElement("div",{className:"nav-item nav-middle"},s.a.createElement(d.c,{exact:!0,className:"nav-link",to:"/app/"},s.a.createElement(O.a,{className:"icon",icon:S.f})," ",s.a.createElement("span",{className:"text"},"Home")),s.a.createElement(d.c,{className:"nav-link",to:"/app/allTests"},s.a.createElement(O.a,{className:"icon",icon:S.a}),s.a.createElement("span",{className:"text"}," Tests")),s.a.createElement(d.c,{className:"nav-link",to:"/app/createTest"},s.a.createElement(O.a,{className:"icon",icon:S.g})," ",s.a.createElement("span",{className:"text"},"Create Test"))),s.a.createElement("div",{className:"nav-item nav-bottom"},!t&&s.a.createElement(s.a.Fragment,null,s.a.createElement(d.c,{className:"nav-link",to:"/app/login"},s.a.createElement(O.a,{className:"icon",icon:S.h})," ",s.a.createElement("span",{className:"text"},"Login")),s.a.createElement(d.c,{className:"nav-link",to:"/app/register"},s.a.createElement(O.a,{className:"icon",icon:S.k})," ",s.a.createElement("span",{className:"text"},"Register"))),t&&s.a.createElement("button",{className:"nav-link",onClick:this.logout.bind(this)},s.a.createElement(O.a,{className:"icon",icon:S.i})," ",s.a.createElement("span",{className:"text"},"Logout"))))}}]),t}(n.Component);I.contextType=g.a;var A=I,M=a(10),q=a(18),P=(a(56),function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.percent,t="";return t=e>=85?"excellent":e>=65?"good":e>=40?"satisfactory":"bad",s.a.createElement("span",{className:"status-icon ".concat(t)},s.a.createElement(O.a,{icon:S.e}))}}]),t}(n.Component)),R=a(81),_=a.n(R),F=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={isRedirectToTest:!1,testToRedirect:null,isRedirectToResult:!1},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"redirectToResult",value:function(e){this.setState(Object(o.a)({},this.state,{testToRedirect:e,isRedirectToResult:!0}))}},{key:"redirectToTest",value:function(e){this.setState(Object(o.a)({},this.state,{testToRedirect:e,isRedirectToTest:!0}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.isRedirectToResult,n=t.isRedirectToTest,r=t.testToRedirect,c=this.props.tests;return a?s.a.createElement(p.a,{to:"/app/testResult/".concat(this.context.user._id,"/").concat(r._id)}):n?s.a.createElement(p.a,{to:"/app/testInfo/".concat(r._id)}):s.a.createElement("div",{className:"results-table"},s.a.createElement("div",{className:"row head"},s.a.createElement("div",{className:"cell title"},"Test name"),s.a.createElement("div",{className:"cell subject"},"Date"),s.a.createElement("div",{className:"cell attempt"},"Attempt No."),s.a.createElement("div",{className:"cell points"},"Points"),s.a.createElement("div",{className:"cell points average"},"Average")),c.map((function(t){return s.a.createElement("div",{className:"row",onClick:function(){return e.redirectToResult(t,"fullDate")}},s.a.createElement(d.b,{to:"/app/testInfo/".concat(t.testId),className:"cell title"},t.title),s.a.createElement("div",{className:"cell subject"},_()(t.date,"dd.mm.yyyy, hh:mm")),s.a.createElement("div",{className:"cell attempt"},t.attempt),s.a.createElement("div",{className:"cell points"},t.points,"/",t.maxPoints," (",Math.floor(t.points/t.maxPoints*100),"%)"),s.a.createElement("div",{className:"cell points average"},t.avgPoints,"/",t.maxPoints," (",Math.floor(t.avgPoints/t.maxPoints*100),"%)"))})))}}]),t}(n.Component);F.contextType=g.a;var D=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={results:[],tests:[],isLoading:!0,left:0,right:5,isRedirectToLogin:!1,isMoreTests:!0},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"loadTests",value:function(){var e=this,t=this.state,a=t.left,n=t.right,s=t.tests,r=t.isMoreTests,c=this.props.authContext;console.log(a,n);for(var i=function(t){var i=s[t];console.log(t),fetch("".concat(c.proxy,"/api/tests/testInfo/").concat(i.testId),{headers:Object(o.a)({},Object(q.a)())}).then((function(e){return e.json()})).then((function(a){if(a.isTokenError)return c.logout(),e.setState(Object(o.a)({},e.state,{isRedirectToLogin:!0})),!0;var n=a.results;console.log(n);var r=0;n.forEach((function(e){r+=+e.points})),r=Math.floor(r/n.length),console.log(r),i=Object(o.a)({},i,{avgPoints:r,subject:a.subject}),s[t]=i,e.setState(Object(o.a)({},e.state,{tests:s})),console.log(i)})).then((function(){t+1===Math.min(s.length,n)&&(e.context.results=s.slice(0,n),a=n,n+=5,a>=s.length&&(r=!1),e.setState(Object(o.a)({},e.state,{tests:s,left:a,right:n,isMoreTests:r}),(function(){return console.log("okokokok")})))}))},l=a;l<Math.min(s.length,n);l++)i(l)}},{key:"componentWillMount",value:function(){var e=this,t=this.props.user,a=[],n=new Map,s=this.context.results;if(t.passedTests.forEach((function(e){var s=n.get(e.testId);s||(s=0),s++,n.set(e.testId,s);var r=t.passedTests.filter((function(t){return t.testId===e.testId})).length;e=Object(o.a)({},e,{attempt:r+1-s}),a.push(e)})),s){for(var r=0;r<s.length;r++){var c=s[r];a[r]=c}this.setState(Object(o.a)({},this.state,{tests:a,left:s.length,right:s.length+5}))}else this.setState(Object(o.a)({},this.state,{tests:a}),(function(){e.loadTests()}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.tests,n=t.left,r=(t.right,t.isMoreTests);if(!a.length)return s.a.createElement(M.a,{size:"md"});var c=a.slice(0,n);return s.a.createElement("div",null,s.a.createElement(F,{tests:c}),r&&s.a.createElement("button",{className:"load-more",onClick:function(){return e.loadTests()}},"Load more"))}}]),t}(n.Component);D.contextType=E.a;a(102),s.a.lazy((function(){return Promise.resolve().then(a.bind(null,84))}));var H=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={user:null,passedTests:[],avgResult:null,isLoading:!0,nextLinkVal:null},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(this.context.proxy,"/api/users/user"),{headers:Object(q.a)()}).then((function(e){return e.json()})).then((function(t){t.isTokenError&&(e.context.logout(),window.location.href="/app/login"),console.log(t.passedTests),t.passedTests.reverse();var a=0;t.passedTests.length&&(t.passedTests.forEach((function(e){a+=e.points/e.maxPoints})),a/=t.passedTests.length,a=Math.floor(100*a)),e.setState({user:t,avgResult:a,isLoading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.user,a=e.isLoading,n=e.avgResult;if(console.log(t),a||!t)return s.a.createElement(M.a,null);"".concat(this.context.proxy,"/api/tests/passedTests/").concat(t._id);return s.a.createElement(s.a.Fragment,null,s.a.createElement("h1",{className:"heading"},"Hello, ",t.name,"!"),s.a.createElement("div",{className:"profile-block"},s.a.createElement("div",{className:"profile-img"},s.a.createElement("img",{src:"/img/profile-img.svg",alt:""})),s.a.createElement("div",{className:"profile-info"},s.a.createElement("div",{className:"profile-info__block"},s.a.createElement("span",{className:"info-text"},"Name: ",s.a.createElement(P,{percent:n})," ",t.name)),s.a.createElement("div",{className:"profile-info__block"},s.a.createElement("span",{className:"info-text"},"Tests passed: ",t.passedTests.length)),s.a.createElement("div",{className:"profile-info__block"},s.a.createElement("span",{className:"info-text"},"Average result: ",n,"%")))),t.passedTests.length>0?s.a.createElement("h2",null,"Your recent tests: "):s.a.createElement("h2",null,"You haven't passed any tests yet!"),s.a.createElement(D,{authContext:this.context,user:t}))}}]),t}(n.Component);H.contextType=g.a;a(57);var B=s.a.lazy((function(){return Promise.resolve().then(a.bind(null,84))})),U=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={isLoading:!1,tests:[],isRedirectToLogin:!1,left:0,right:3,isMoreTests:!0},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.isRedirectToLogin,r="".concat(this.context.proxy,"/api/tests/allTests");return a?s.a.createElement(p.a,{to:"/app/login"}):t?s.a.createElement(M.a,null):s.a.createElement(s.a.Fragment,null,s.a.createElement("h1",{className:"heading"},"Recent tests: "),s.a.createElement(n.Suspense,{fallback:s.a.createElement(M.a,null)},s.a.createElement(B,{urlToFetch:r,authContext:this.context,type:"full"})))}}]),t}(n.Component);U.contextType=g.a;a(86),a(103);var K=function(e){var t=e.name,a=e.onChange,n=e.type,r=e.isMini,c=e.value,o=function(e){console.log(e),a(e)},i=r?"mini":"";return s.a.createElement("div",{className:"input-group "+i},s.a.createElement("input",{value:c,autoComplete:r?"off":"on",className:i,type:n,name:t,onChange:function(e){return o(e)}}),s.a.createElement("label",{htmlFor:t}))},z=a(32),Q=a(27),W=(a(104),function(e){var t=e.link,a=Object(p.g)();return t?s.a.createElement("div",{className:"page-top"},s.a.createElement(d.b,{to:t,className:"a"},s.a.createElement(O.a,{icon:S.b})," Back")):s.a.createElement("div",{className:"page-top"},s.a.createElement("span",{onClick:function(){return a.goBack()},className:"a"},s.a.createElement(O.a,{icon:S.b})," Back"))}),J=a(82),Y=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.results,a=e.userId,n=[],r=new Map,c=-1;t.forEach((function(e){if(e.userId===a&&(c=Math.max(c,e.points)),r.get(e.points)){var t=r.get(e.points);r.set(e.points,t+1)}else r.set(e.points,1),n.push(e.points)})),n.sort();var o="rgba(0, 0, 0, .05)",i="rgba(0, 0, 0, .3)";window.matchMedia("(prefers-color-scheme: dark)").matches&&(o="rgba(255, 255, 255, .05)",i="rgba(255, 255, 255, 1)");var l=[],u=[];console.log(c),n.forEach((function(e){var t=r.get(e);l.push(t),console.log(e),+e===c?(u.push("rgba(42, 150, 71, .2)"),console.log("object")):u.push(o)}));return s.a.createElement("div",{className:"chart-container"},s.a.createElement(J.a,{data:function(e){e.getContext("2d").createLinearGradient(0,0,100,0);return{labels:n,datasets:[{data:l,fill:!1,backgroundColor:u,borderColor:i,maxBarThickness:60,borderWidth:1}]}},options:{scales:{yAxes:[{ticks:{beginAtZero:!0,callback:function(e){if(e%1===0)return e}}}]},legend:{display:!1}}}))}}]),t}(n.Component),V=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={isLoading:!0,test:null,testResults:null,usernames:null,errors:[],isRedirectToLogin:!1,hasLiked:!1},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.testId;fetch("".concat(this.context.proxy,"/api/tests/testInfo/").concat(t),{headers:Object(o.a)({},Object(q.a)())}).then((function(e){return e.json()})).then((function(t){if(t.isTokenError)e.context.logout(),e.setState(Object(o.a)({},e.state,{isRedirectToLogin:!0}));else{var a=!1;t.likes.find((function(t){return t===e.context.userId}))&&(a=!0),e.setState(Object(o.a)({},e.state,{isLoading:!1,test:t,hasLiked:a}))}})),fetch("".concat(this.context.proxy,"/api/tests/testResults/").concat(t)).then((function(e){return e.json()})).then((function(t){console.log(t),t.testResults.sort((function(e,t){return t.points-e.points})),e.setState({isLoading:!1,testResults:t.testResults,usernames:t.usernames})}))}},{key:"setAccessKey",value:function(e){this.setState(Object(o.a)({},this.state,{currentAccessKey:e.target.value}))}},{key:"goToTest",value:function(){var e=this,t=this.state,a=t.test,n=t.errors,s=t.testResults,r=a.maxAttempts,c=0;if(s.forEach((function(t){t.userId===e.context.userId&&c++})),console.log(c,r),r&&c>=r)n.attempts="You have not got any attempts left!",this.setState(Object(o.a)({},this.state,{errors:n}));else{var i=this.state.currentAccessKey,l=a.accessKey,u=a._id,m=a.isProtected;if(l!==i&&m){var h=this.state.errors;h.keyError="Incorrect access key!",this.setState(Object(o.a)({},this.state,{errors:h}))}else window.location.href="/app/passTest/".concat(u)}}},{key:"componentDidUpdate",value:function(){var e=document.querySelector("span.field");console.log(e),e&&null!==e&&e.addEventListener("keypress",(function(e){13===e.which&&e.preventDefault()}))}},{key:"setLike",value:function(){var e=this,t=this.state,a=t.test,n=t.hasLiked;fetch("".concat(this.context.proxy,"/api/tests/likeTest/").concat(a._id),{method:"POST",headers:Object(o.a)({},q.a,{"Content-Type":"application/json"}),body:JSON.stringify({isIncrease:!n,userId:this.context.userId})}).then((function(e){return e.json()})).then((function(t){var a=e.state.test;a.likes=t.likes,console.log(a.likes.length),e.setState(Object(o.a)({},e.state,{test:a,hasLiked:!n}),(function(){return console.log(e.state.hasLiked)}))}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoading,n=t.test,r=t.testResults,c=t.errors,o=t.isRedirectToLogin,i=t.hasLiked;if(o)return s.a.createElement(p.a,{to:"/app/login"});if(a||null===n)return s.a.createElement(M.a,null);var l=n.maxAttempts,u=n.timeLimit,m=0;r&&r.forEach((function(t){t.userId===e.context.userId&&m++}));var h=l-m;return s.a.createElement("div",null,s.a.createElement(W,null),s.a.createElement("h1",null,n.title),s.a.createElement("p",null,n.description),n.isProtected&&s.a.createElement(s.a.Fragment,null,s.a.createElement("br",null),s.a.createElement("label",{htmlFor:"title"},"To start the test, you need to type in the secret key!")," ",s.a.createElement("br",null),s.a.createElement(K,{type:"text",name:"secretKey",isMini:!0,onChange:function(t){return e.setAccessKey(t)}}),s.a.createElement("span",{className:"error-input"},c.keyError)),l&&s.a.createElement("div",{className:"attempts-block"},s.a.createElement("span",{className:"max-attemtts"},"Attempts left: ",h)),u&&s.a.createElement("div",{className:"attempts-block"},s.a.createElement("span",{className:"max-attemtts"},"Time limit: ",Object(z.a)(u))),s.a.createElement("br",null),s.a.createElement("span",{className:"error-input"},c.attempts),s.a.createElement("div",{className:"btn-block"},s.a.createElement("button",{onClick:function(){return e.goToTest()},className:"btn btn-cta"},"Pass test!"),s.a.createElement("button",{className:"btn like-btn",onClick:this.setLike.bind(this),icon:Q.b},s.a.createElement(O.a,{className:"icon",icon:i?S.j:Q.b}),s.a.createElement("span",null,n.likes.length))),s.a.createElement("div",{className:"results"},s.a.createElement("h3",null,"Results: "),n.results.length?s.a.createElement(Y,{results:n.results,userId:this.context.user._id}):s.a.createElement("h2",null,"No one has passed the test yet!")))}}]),t}(n.Component);V.contextType=g.a;var G=a(84),Z=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={createdTests:[],isLoading:!1},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.context.userId||(window.location.href="/app/login"),fetch("".concat(this.context.proxy,"/api/tests/createdTests/").concat(this.context.userId),{method:"POST"}).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({createdTests:t.tests,isLoading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.createdTests;if(e.isLoading)return s.a.createElement(M.a,null);var a="".concat(this.context.proxy,"/api/tests/createdTests/").concat(this.context.userId);return s.a.createElement(s.a.Fragment,null,s.a.createElement("h1",{className:"heading"},"Currently, you have ",t.length," created tests"),s.a.createElement(d.b,{to:"/app/createTestForm",className:"btn btn-cta"},"New test"),s.a.createElement(n.Suspense,{fallback:s.a.createElement(M.a,null)},s.a.createElement(G.default,{type:"created",urlToFetch:a,user:null})))}}]),t}(n.Component);Z.contextType=g.a;a(197);var $=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={isLoading:!0,test:null,answers:null},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.userId,a=this.props.match.params.resultId;fetch("".concat(this.context.proxy,"/api/tests/testResult/").concat(t,"/").concat(a)).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({isLoading:!1,answers:t.answers,test:t.test})}))}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.test,n=e.answers;return a&&console.log(a.questions[0]),console.log(n),console.log(this.props),t?s.a.createElement(M.a,null):s.a.createElement("div",null,s.a.createElement(W,{link:"/app"}),s.a.createElement("h1",{className:"heading"},'Test result for "',a.title,'"'),s.a.createElement("div",{className:"result-table"},s.a.createElement("table",null,s.a.createElement("col",{className:"main"}),n.map((function(e){return s.a.createElement("col",{className:"answer"})})),s.a.createElement("tr",{className:"first"},s.a.createElement("th",{className:"first main"},"Question No."),n.map((function(e,t){return s.a.createElement("th",{className:"first ans"},t+1)}))),s.a.createElement("tr",null,s.a.createElement("th",{className:"main"},"Result: "),n.map((function(e,t){var n="";console.log(toString(e));var r=e.toString()===a.questions[t].correctAnswerId;return n=parseInt(e)===parseInt(a.questions[t].correctAnswerId)?"correct":"wrong",s.a.createElement("th",{className:"answerr ans ".concat(n)},r?s.a.createElement(O.a,{className:"icon",icon:Q.a}):s.a.createElement(O.a,{className:"icon",icon:Q.c}))}))))),n.map((function(e,t){var n=e.toString()===a.questions[t].correctAnswerId;console.log(a.questions);var r="";n||(r="wrong");var c=a.questions[t];return console.log(c.answers[parseInt(c.correctAnswerId)]),s.a.createElement("div",{className:"question-ans"},s.a.createElement("h3",null,t+1,". ",c.title),0===e?s.a.createElement("span",{className:"ans-text "+r},"Your answer: -"):s.a.createElement("span",{className:"ans-text "+r},"Your answer: ",e,") ",c.answers[e-1].text),s.a.createElement("span",{className:"ans-text"},"Correct answer: ",c.correctAnswerId,") ",c.answers[parseInt(c.correctAnswerId)-1].text))})))}}]),t}(n.Component);$.contextType=g.a;a(198);var X=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"modal-wrapper"},s.a.createElement("div",{className:"modal-overlay"}),s.a.createElement("div",{className:"modal-card"},s.a.createElement("div",{className:"card-top"},s.a.createElement("div",{className:"icon"},s.a.createElement("img",{src:"/img/questionmark.svg",alt:""})),s.a.createElement("div",{className:"text"},this.props.message)),s.a.createElement("div",{className:"card-buttons"},s.a.createElement("button",{onClick:function(){return e.props.setModalChoice(!0)},className:"cta"},this.props.positiveChoice),s.a.createElement("button",{onClick:function(){return e.props.setModalChoice(!1)},className:""},this.props.negativeChoice))))}}]),t}(n.Component),ee=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={questions:[{title:"",answers:[{text:"",answerId:"1"},{text:"",answerId:"2"}],correctAnswerId:"1"}],title:"",description:"",subject:"",isProtected:!1,accessKey:"",creator:a.context.userId,timeErrorMsg:"",isLoading:!1,errors:[],maxAttempts:null,isLimitedAttempts:!1,isLimitedTime:!1,timeLimit:null,answerToLoadTest:void 0,hasSavedTest:!1},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e,t,a,n,s,r,c=this;e=document.getElementsByClassName("custom-select"),console.log(e),f.a.get("savedTestToCreate")&&this.setState(Object(o.a)({},this.state,{hasSavedTest:!0}));var i=[300,600,1200,1800,3600,5400],l=function(e){console.log("hhhh"),c.setState(Object(o.a)({},c.state,{timeLimit:i[e-1]}),(function(){return console.log(c.state)}))};for(t=0;t<e.length;t++){a=e[t].getElementsByTagName("select")[0],(n=document.createElement("DIV")).setAttribute("class","select-selected"),n.innerHTML=a.options[a.selectedIndex].innerHTML,e[t].appendChild(n),(s=document.createElement("DIV")).setAttribute("class","select-items select-hide");for(var u=function(e){(r=document.createElement("DIV")).innerHTML=a.options[e].innerHTML,console.log(a),r.addEventListener("click",(function(t){var a,n,s,r,c;for(r=this.parentNode.parentNode.getElementsByTagName("select")[0],c=this.parentNode.previousSibling,console.log(i[e-1]),n=0;n<r.length;n++)if(r.options[n].innerHTML===this.innerHTML){for(r.selectedIndex=n,c.innerHTML=this.innerHTML,a=this.parentNode.getElementsByClassName("same-as-selected"),s=0;s<a.length;s++)a[s].removeAttribute("class");this.setAttribute("class","same-as-selected");break}c.click(),l(e)})),s.appendChild(r)},m=1;m<a.length;m++)u(m);e[t].appendChild(s),n.addEventListener("click",(function(e){e.stopPropagation(),h(this),this.nextSibling.classList.toggle("select-hide"),this.classList.toggle("select-arrow-active")}))}function h(e){var t,a,n,s=[];for(t=document.getElementsByClassName("select-items"),a=document.getElementsByClassName("select-selected"),n=0;n<a.length;n++)e===a[n]?s.push(n):a[n].classList.remove("select-arrow-active");for(n=0;n<t.length;n++)s.indexOf(n)&&t[n].classList.add("select-hide")}document.addEventListener("click",h)}},{key:"handleAddAnswer",value:function(e){var t=this,a=this.state.questions,n=a[e].answers.length;console.log(n.toString()),6!==a[e].answers.length&&(a[e].answers.push({text:"",answerId:(n+1).toString()}),console.log(a[e].answers),this.setState(Object(o.a)({},this.state,{questions:a}),(function(){f.a.set("savedTestToCreate",t.state)})))}},{key:"handleAddQuestion",value:function(){var e=this,t=this.state.questions;20!==t.length&&(t.push({title:"",answers:[{text:"",answerId:"1"},{text:"",answerId:"2"}],correctAnswerId:"1"}),this.setState(Object(o.a)({},this.state,{questions:t}),(function(){f.a.set("savedTestToCreate",e.state)})))}},{key:"setQuestionTitle",value:function(e,t){var a=this,n=this.state.questions;n[t].title=e.target.value,this.setState(Object(o.a)({},this.state,{questions:n}),(function(){f.a.set("savedTestToCreate",a.state)}))}},{key:"setAnswerText",value:function(e,t,a){var n=this;console.log(e.target.value);var s=this.state.questions;console.log(s[t].answers,a),s[t].answers[a].text=e.target.value,this.setState(Object(o.a)({},this.state,{questions:s}),(function(){f.a.set("savedTestToCreate",n.state)}))}},{key:"setTestTitle",value:function(e){var t=this;this.setState(Object(o.a)({},this.state,{title:e.target.value}),(function(){f.a.set("savedTestToCreate",t.state)}))}},{key:"setTestDescription",value:function(e){var t=this;this.setState(Object(o.a)({},this.state,{description:e.target.value}),(function(){f.a.set("savedTestToCreate",t.state)}))}},{key:"setTestSubject",value:function(e){var t=this;this.setState(Object(o.a)({},this.state,{subject:e.target.value}),(function(){f.a.set("savedTestToCreate",t.state)}))}},{key:"setProtectedState",value:function(e){var t=this;this.setState(Object(o.a)({},this.state,{isProtected:!this.state.isProtected,accessKey:""}),(function(){f.a.set("savedTestToCreate",t.state)}))}},{key:"setAttemptsState",value:function(e){var t=this;this.setState(Object(o.a)({},this.state,{isLimitedAttempts:!this.state.isLimitedAttempts,maxAttempts:1}),(function(){f.a.set("savedTestToCreate",t.state)}))}},{key:"setTimeLimitState",value:function(e){var t=this;this.setState(Object(o.a)({},this.state,{isLimitedTime:!this.state.isLimitedTime,timeLimit:null}),(function(){f.a.set("savedTestToCreate",t.state)}))}},{key:"setAccessKey",value:function(e){var t=this;this.setState(Object(o.a)({},this.state,{accessKey:e.target.value}),(function(){f.a.set("savedTestToCreate",t.state)}))}},{key:"setAttemptsNumber",value:function(e){var t=this;this.setState(Object(o.a)({},this.state,{maxAttempts:parseInt(e.target.value)}),(function(){f.a.set("savedTestToCreate",t.state)}))}},{key:"changeAttemptsNumber",value:function(e){var t=this,a=this.state.maxAttempts;a=e>0?Math.min(a+e,10):Math.max(a+e,1),this.setState(Object(o.a)({},this.state,{maxAttempts:a}),(function(){f.a.set("savedTestToCreate",t.state)}))}},{key:"setCorrectAnswerId",value:function(e,t){var a=this,n=this.state.questions;n[e].correctAnswerId=t,console.log(t),this.setState(Object(o.a)({},this.state,{questions:n}),(function(){f.a.set("savedTestToCreate",a.state)}))}},{key:"handleAddTest",value:function(){var e=this;this.setState(Object(o.a)({},this.state,{isLoading:!0}));var t=this.state;console.log(this.state);var a=[];if(t.title||(a.title="The test must have a title"),t.subject||(a.subject="The test must have a subject"),t.questions.map((function(e){return e.title||(a.questions="Questions must not be empty"),e.answers.map((function(e){return e.text||(a.answers="Answers must not be empty"),!0})),!0})),a.title||a.subject||a.questions||a.answers)this.setState(Object(o.a)({},this.state,{errors:a}));else{var n=!1;t.title.length>=30&&(a.title="Title must not be longer than 30 syllables",n=!0),t.subject.length>=18&&(a.title="Title subject not be longer than 18 syllables",n=!0),t.description.length>=400&&(a.title="Title description not be longer than 400 syllables",n=!0),n?this.setState(Object(o.a)({},this.state,{errors:a})):(this.context.userId||(window.location.href="/app/login"),fetch("".concat(this.context.proxy,"/api/tests/createTest"),{method:"POST",headers:{"Content-Type":"application/json","x-auth-token":this.context.token},body:JSON.stringify(this.state)}).then((function(e){return e.json()})).then((function(t){console.log(t),t.success?(f.a.set("savedTestToCreate",null),window.location.href="/app/allTests"):t.isTimeErr&&e.setState(Object(o.a)({},e.state,{timeErrorMsg:"You cannot create more than 1 test in 5 minutes!",isLoading:!1}))})))}}},{key:"setModalChoice",value:function(e){var t=this;e?this.setState(f.a.get("savedTestToCreate"),(function(){console.log(t.state),t.setState(Object(o.a)({},t.state,{hasSavedTest:!1}))})):(f.a.set("savedTestToCreate",null),this.setState(Object(o.a)({},this.state,{hasSavedTest:!1})))}},{key:"deleteAnswer",value:function(e,t){var a=this.state.questions;if(!(a[e].answers.length<=2)){var n=parseInt(t);a[e].correctAnswerId.toString()===(t+1).toString()&&(a[e].correctAnswerId=0===t?"1":t.toString());for(var s=n;s<a[e].answers.length;s++)a[e].answers[s].answerId=(parseInt(a[e].answers[s].answerId)-1).toString(),s!==n&&(document.getElementById("_".concat(e,"-").concat(s-1)).value=a[e].answers[s].text);console.log(+a[e].correctAnswerId,a[e].answers.length),+a[e].correctAnswerId>=a[e].answers.length&&(a[e].correctAnswerId=(a[e].answers.length-1).toString()),console.log(a[e]),a[e].answers.splice(t,1),console.log(a[e].answers),this.setState(Object(o.a)({},this.state,{questions:a}))}}},{key:"deleteQuestion",value:function(e){var t=this.state.questions;1!==t.length&&(t.splice(e,1),this.setState(Object(o.a)({},this.state,{questions:t})))}},{key:"render",value:function(){var e=this,t=this.state,a=t.questions,n=t.isProtected,r=t.timeErrorMsg,c=t.isLoading,o=t.errors,i=t.isLimitedAttempts,l=t.isLimitedTime,u=t.maxAttempts,m=t.hasSavedTest,h=t.title,d=t.description,p=t.subject,v=t.accessKey,f=["A","B","C","D","E","F"];return s.a.createElement("div",null,m&&s.a.createElement(X,{message:"Load autosaved test?",positiveChoice:"Sure",negativeChoice:"No, delete it",setModalChoice:function(t){return e.setModalChoice(t)}}),s.a.createElement("h1",{className:"heading"},"Create test"),s.a.createElement("div",{className:"test-basic-info"},s.a.createElement("div",{className:"info-group"},s.a.createElement("label",{htmlFor:"title"},"Test name: "),s.a.createElement(K,{type:"text",onChange:function(t){return e.setTestTitle(t)},isMini:!0,name:"title",value:h}),s.a.createElement("span",{className:"error-input"},o.title)),s.a.createElement("div",{className:"info-group"},s.a.createElement("label",{htmlFor:"subject"},"Subject: "),s.a.createElement(K,{type:"text",onChange:function(t){return e.setTestSubject(t)},isMini:!0,name:"title",value:p}),s.a.createElement("span",{className:"error-input"},o.subject)),s.a.createElement("div",{className:"info-group"},s.a.createElement("label",{htmlFor:"description"},"Description: "),s.a.createElement("textarea",{className:"",onChange:function(t){return e.setTestDescription(t)},name:"description",id:"",cols:"30",rows:"10",value:d})),s.a.createElement("div",{className:"info-group-checkbox"},s.a.createElement("div",{className:"pretty p-icon p-smooth p-thick p-curve"},n?s.a.createElement("input",{type:"checkbox",checked:!0,onChange:this.setProtectedState.bind(this)}):s.a.createElement("input",{type:"checkbox",onChange:this.setProtectedState.bind(this)}),s.a.createElement("div",{className:"state p-success"},s.a.createElement("i",{className:"icon"},s.a.createElement(O.a,{className:"check-icon",icon:S.c})),s.a.createElement("label",null,"Protected")))),n&&s.a.createElement("div",{className:"info-group"},s.a.createElement("label",{htmlFor:"key"},"Secret key: "),s.a.createElement(K,{onChange:function(t){return e.setAccessKey(t)},isMini:!0,name:"accessKey",type:"text",value:v})),s.a.createElement("div",{className:"info-group-checkbox"},s.a.createElement("div",{className:"pretty p-icon p-smooth p-thick p-curve"},i?s.a.createElement("input",{type:"checkbox",checked:!0,onChange:this.setAttemptsState.bind(this)}):s.a.createElement("input",{type:"checkbox",onChange:this.setAttemptsState.bind(this)}),s.a.createElement("div",{className:"state p-success"},s.a.createElement("i",{className:"icon"},s.a.createElement(O.a,{className:"check-icon",icon:S.c})),s.a.createElement("label",null,"Limited attempts")))),i&&s.a.createElement("div",{className:"info-group"},s.a.createElement("label",{htmlFor:"key"},"Maximum attempts: "),s.a.createElement("div",{className:"btn-group"},s.a.createElement("button",{className:"increment-btn",onClick:function(){return e.changeAttemptsNumber(-1)}}," ",s.a.createElement("span",null,"-")," "),s.a.createElement("span",{className:"attempts-num"},u),s.a.createElement("button",{className:"increment-btn",onClick:function(){return e.changeAttemptsNumber(1)}}," ",s.a.createElement("span",null,"+")," "))),s.a.createElement("div",{className:"info-group-checkbox"},s.a.createElement("div",{className:"pretty p-icon p-smooth p-thick p-curve"},l?s.a.createElement("input",{type:"checkbox",checked:!0,onChange:this.setTimeLimitState.bind(this)}):s.a.createElement("input",{type:"checkbox",onChange:this.setTimeLimitState.bind(this)}),s.a.createElement("div",{className:"state p-success"},s.a.createElement("i",{className:"icon"},s.a.createElement(O.a,{className:"check-icon",icon:S.c})),s.a.createElement("label",null,"Limited time")))),l?s.a.createElement("div",{className:"custom-select",style:{width:"300px"}},s.a.createElement("select",null,s.a.createElement("option",{value:"0"},"Select time limit:"),s.a.createElement("option",{value:"1"},"5 minutes"),s.a.createElement("option",{value:"2"},"10 minutes"),s.a.createElement("option",{value:"3"},"20 minuted"),s.a.createElement("option",{value:"4"},"30 minutes"),s.a.createElement("option",{value:"5"},"1 hour"),s.a.createElement("option",{value:"6"},"1.5 hours"))):s.a.createElement("div",{className:"custom-select",style:{width:"300px",visibility:"hidden"}},s.a.createElement("select",null,s.a.createElement("option",{value:"0"},"Select time limit:"),s.a.createElement("option",{value:"1"},"5 minutes"),s.a.createElement("option",{value:"2"},"10 minutes"),s.a.createElement("option",{value:"3"},"20 minuted"),s.a.createElement("option",{value:"4"},"30 minutes"),s.a.createElement("option",{value:"5"},"1 hour"),s.a.createElement("option",{value:"6"},"1.5 hours")))),s.a.createElement("div",{className:"questions"},a.map((function(t,a){return s.a.createElement("div",{key:a,className:"question-container"},s.a.createElement("h3",{className:"question-container__title"},s.a.createElement("div",{className:"delete-question-btn"},s.a.createElement("span",null,"\xd7")),s.a.createElement("span",null,a+1,"."),"  ",s.a.createElement(K,{type:"text",isMini:!0,onChange:function(t){return e.setQuestionTitle(t,a)},name:"questionTitle",value:t.title})),s.a.createElement("div",{className:"question-container__answers"},t.answers.map((function(n,r){var c="";return console.log(t.correctAnswerId.toString()===(r+1).toString()),t.correctAnswerId.toString()===(r+1).toString()&&(c="selected"),console.log(c),s.a.createElement("div",{key:"".concat(r,"-").concat(a),className:"answer-block "+c},s.a.createElement("div",{className:"answer-block__letter",onClick:function(){return e.setCorrectAnswerId(a,n.answerId)}},s.a.createElement("span",null,f[r])),s.a.createElement("div",{className:"answer-block__text"},s.a.createElement("input",{autoComplete:"off",id:"_".concat(a,"-").concat(r),type:"text",onChange:function(t){return e.setAnswerText(t,a,r)},value:n.text}),s.a.createElement("button",{className:"btn-delete",onClick:function(){return e.deleteAnswer(a,r)}},s.a.createElement("span",null,"\xd7"))))})),s.a.createElement("button",{onClick:e.handleAddAnswer.bind(e,a),className:"add-question"},s.a.createElement("span",null,"+"))))})),s.a.createElement("button",{onClick:this.handleAddQuestion.bind(this),className:"new-question btn-secondary"},"New question")),r&&s.a.createElement("span",{className:"error-msg"},r),o.questions&&s.a.createElement("span",{className:"error-msg"},o.questions),o.answers&&s.a.createElement("span",{className:"error-msg"},o.answers),s.a.createElement("button",{onClick:this.handleAddTest.bind(this),className:"btn btn-cta"},"Create test!"),c&&s.a.createElement(M.a,{size:"sm"}))}}]),t}(n.Component);ee.contextType=g.a;a(199);var te=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={isLoading:!0,test:[],answers:[],answeredQuestions:0,isSubmitted:!1,isTimeUp:!1,time:null},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.testId;fetch("".concat(this.context.proxy,"/api/tests/testInfo/").concat(t),{headers:Object(o.a)({},Object(q.a)())}).then((function(e){return e.json()})).then((function(t){console.log(t);for(var a=[],n=0;n<t.questions.length;n++)a[n]=0;if(e.setState({isLoading:!1,answers:a,test:t}),t.timeLimit){var s=t.timeLimit;setInterval((function(){s=Math.max(s-1,0);var t=e.state.isTimeUp;!t&&s<=0&&(t=!0,document.querySelectorAll("input[type='radio']").forEach((function(e){e.setAttribute("onChange","return false"),e.setAttribute("onClick","return false")})));e.setState(Object(o.a)({},e.state,{isTimeUp:t,time:s}))}),1e3)}else{var r=0;setInterval((function(){r++,e.setState(Object(o.a)({},e.state,{time:r}))}),1e3)}}))}},{key:"handleSelect",value:function(e,t){var a=this,n=this.state,s=n.answers,r=n.answeredQuestions;n.isTimeUp||(s[e]||r++,s[e]=t,this.setState(Object(o.a)({},this.state,{answers:s,answeredQuestions:r}),(function(){return console.log(a.state)})))}},{key:"finishTest",value:function(e){e.preventDefault();var t=0,a=[],n=this.state,s=n.answers,r=n.test,c=n.isSubmitted,i=n.time;if(r.timeLimit&&(i=r.timeLimit-i),!c){this.setState(Object(o.a)({},this.state,{isSubmitted:!0})),console.log("finish!"),r.questions.map((function(e,n){return e.correctAnswerId===s[n]?(t++,a.push(!0)):a.push(!1),e}));var l={userId:this.context.userId,points:t,time:i,answers:a,title:r.title,maxPoints:r.questions.length,date:Date.now(),answersLetters:s};fetch("".concat(this.context.proxy,"/api/tests/saveResult/").concat(r._id),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then((function(){console.log("result saved!"),window.location.href="/app/testInfo/".concat(r._id)}))}}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoading,n=t.test,r=t.answeredQuestions,c=t.time,o=t.answers,i=n.questions,l=["A","B","C","D","E","F","G","H"];return a?s.a.createElement(M.a,null):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"info-block"},s.a.createElement("div",null,n.timeLimit?s.a.createElement("span",null,"Time left: ",Object(z.b)(c)):s.a.createElement("span",null,"Time passed: ",Object(z.b)(c))),s.a.createElement("div",null,"Answered questions: ",r," / ",i.length)),s.a.createElement("form",{className:"test-form",onSubmit:function(t){return e.finishTest(t)}},s.a.createElement("h1",{className:"heading"},"Pass test '",n.title,"'"),s.a.createElement("div",{className:"test-questions"},i.map((function(t,a){return s.a.createElement("div",{className:"question-container"},s.a.createElement("h3",{class:"question-container__title"},a+1,".  ",t.title),s.a.createElement("div",{className:"question-container__answers"},t.answers.map((function(t,n){var r="";return o[a].toString()===(n+1).toString()&&(r="selected"),s.a.createElement("div",{className:"answer-block "+r,onClick:e.handleSelect.bind(e,a,t.answerId)},s.a.createElement("div",{className:"answer-block__letter"},s.a.createElement("span",null,l[n])),s.a.createElement("div",{className:"answer-block__text"},s.a.createElement("span",null,t.text)))}))))}))),s.a.createElement("input",{type:"submit",className:"btn btn-cta",value:"Finish"})))}}]),t}(n.Component);te.contextType=g.a;var ae=a(25),ne=(a(73),function(e){var t=[];return e.forEach((function(e){"email"===e.name&&(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.value)||(t.email="Invalid email")),"password"===e.name&&e.value.length<6&&(t.password="Password must be at least 6 characters"),"fullName"===e.name&&e.value.trim().length<=5&&(t.fullName="Please enter a real full name")})),t}),se=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={email:"",password:"",errors:[],isLongerExpiration:!1,isLoading:!1},a.formEl=s.a.createRef(),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"setCredential",value:function(e){var t=this;console.log(e.target),this.setState(Object(o.a)({},this.state,Object(ae.a)({},e.target.name,e.target.value)),(function(){return console.log(t.state)}))}},{key:"setLoading",value:function(e){var t=this;this.setState({isLoading:e},(function(){return console.log(t.state)}))}},{key:"setExpirationState",value:function(){this.setState(Object(o.a)({},this.state,{isLongerExpiration:!this.state.isLongerExpiration}))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.email,s=a.password,r=a.isLongerExpiration,c=ne([{name:"email",value:n},{name:"password",value:s}]);if(c.email||c.password)this.setState(Object(o.a)({},this.state,{errors:c,isLoading:!1}));else{c=[];var i={email:n,password:s,isLongerExpiration:r};fetch("".concat(this.context.proxy,"/api/users/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(e){e.success?(t.context.setToken(e.token,e.user._id,e.user),window.location.href="/app/"):(e.doesUserExist?c.password="Incorrect password":c.email="User does not exist!",t.setState(Object(o.a)({},t.state,{errors:c,isLoading:!1})))}))}}},{key:"render",value:function(){var e=this,t=this.state,a=t.errors,n=t.isLoading;return console.log(n),s.a.createElement("div",null,s.a.createElement("h1",{className:"heading"},"Log in"),s.a.createElement("form",{id:"login-form",onSubmit:function(t){return e.handleSubmit(t)}},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:""},"Email: "),s.a.createElement(K,{name:"email",type:"text",onChange:function(t){return e.setCredential(t)}}),s.a.createElement("span",{className:"error-input"},a.email)),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:""},"Password"),s.a.createElement(K,{name:"password",type:"password",onChange:function(t){return e.setCredential(t)}}),s.a.createElement("span",{className:"error-input"},a.password)),s.a.createElement("div",{className:"checkbox-group pretty p-icon p-smooth p-thick p-curve"},s.a.createElement("input",{type:"checkbox",onChange:this.setExpirationState.bind(this)}),s.a.createElement("div",{className:"state p-success"},s.a.createElement("i",{className:"icon"},s.a.createElement(O.a,{className:"check-icon",icon:S.c})),s.a.createElement("label",null,"Remember for a day"))),s.a.createElement("input",{onClick:function(){return e.setLoading(!0)},type:"submit",className:"btn btn-cta",value:"Log in"}),n&&s.a.createElement(M.a,{size:"sm"})))}}]),t}(n.Component);se.contextType=g.a;var re=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={email:"",password:"",confirmPassword:"",name:"",isTeacher:!1,errors:[],isLoading:!1},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"setCredential",value:function(e){this.setState(Object(ae.a)({},e.target.name,e.target.value))}},{key:"setLoading",value:function(e){var t=this;this.setState({isLoading:e},(function(){return console.log(t.state)}))}},{key:"setTeacherState",value:function(){this.setState(Object(o.a)({},this.state,{isTeacher:!this.state.isTeacher}))}},{key:"registerUser",value:function(e){var t=this;e.preventDefault();var a=[{name:"email",value:this.state.email},{name:"password",value:this.state.password},{name:"fullName",value:this.state.name}],n=ne(a);if(this.state.password!==this.state.confirmPassword&&(n.confirmPassword="Passwords do not match"),n.email||n.password||n.fullName||n.confirmPassword)this.setState(Object(o.a)({},this.state,{errors:n,isLoading:!1}));else{var s={email:this.state.email,password:this.state.password,name:this.state.name};if(this.state.confirmPassword!==s.password)return;fetch("".concat(this.context.proxy,"/api/users/addUser"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(e){console.log(e),e.notSuccess?((n=[]).email="User with such email already exists",t.setState(Object(o.a)({},t.state,{errors:n,isLoading:!1}))):(t.context.setToken(e.token,e.user._id),window.location.href="/app/")}))}}},{key:"render",value:function(){var e=this,t=this.state,a=t.errors,n=t.isLoading,r=function(e){if(!e)return{points:null,strenth:null};var t=0,a=!1,n=!1,s=!1;e.length>8&&t++;var r=!0,c=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var u=i.value;u>="0"&&u<=9?a||(a=!0,t++):u.toLowerCase(u)>="a"&&u.toLowerCase(u)<="z"?n||(n=!0,t++):" "!==u&&(s||(s=!0,t+=2))}}catch(d){c=!0,o=d}finally{try{r||null==l.return||l.return()}finally{if(c)throw o}}var m="Weak",h="weak";return t>=2&&(m="Medium",h="medium"),t>=4&&(m="Strong",h="strong"),t>=5&&(m="Ultra strong",h="ultra-strong"),{points:t,className:h,strenth:m}}(t.password),c=r.strenth,o=r.className;return s.a.createElement(s.a.Fragment,null,s.a.createElement("h1",{className:"heading"},"Register"),s.a.createElement("form",{onSubmit:function(t){return e.registerUser(t)}},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:""},"E-mail: "),s.a.createElement(K,{type:"text",name:"email",onChange:function(t){return e.setCredential(t)}}),s.a.createElement("span",{className:"error-input"},a.email)),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:""},"Full name: "),s.a.createElement(K,{type:"text",name:"name",onChange:function(t){return e.setCredential(t)}}),s.a.createElement("span",{className:"error-input"},a.fullName)),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:""},"Password: ",c&&s.a.createElement("span",{className:"strenth-text "+o},"(",c,")")," "),s.a.createElement(K,{type:"password",name:"password",onChange:function(t){return e.setCredential(t)}}),s.a.createElement("span",{className:"error-input"},a.password)),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:""},"Confirm password: "),s.a.createElement(K,{type:"password",name:"confirmPassword",onChange:function(t){return e.setCredential(t)}}),s.a.createElement("span",{className:"error-input"},a.confirmPassword)),s.a.createElement("div",{className:"checkbox-group pretty p-icon p-smooth p-thick p-curve"},s.a.createElement("input",{type:"checkbox",onChange:this.setTeacherState.bind(this)}),s.a.createElement("div",{className:"state p-success"},s.a.createElement("i",{className:"icon"},s.a.createElement(O.a,{className:"check-icon",icon:S.c})),s.a.createElement("label",null,"Register as teacher"))),s.a.createElement("input",{onClick:function(){return e.setLoading(!0)},type:"submit",className:"btn btn-cta",value:"Create account"}),n&&s.a.createElement(M.a,{size:"sm"})))}}]),t}(n.Component);re.contextType=g.a;a(200),a(201);var ce=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=document.querySelector("main");console.log("Hello"),setInterval((function(){window.lastScrollTime&&(new Date).getTime()<window.lastScrollTime+500?e.classList.contains("on-scroll-bar")||e.classList.add("on-scroll-bar"):e.classList.contains("on-scroll-bar")&&e.classList.remove("on-scroll-bar")}),10),e.addEventListener("scroll",(function(e){window.lastScrollTime=(new Date).getTime()}),!1)}},{key:"render",value:function(){return s.a.createElement(d.a,null,s.a.createElement("div",{className:"app-container"},s.a.createElement(A,null),s.a.createElement("main",null,s.a.createElement(p.d,null,s.a.createElement(p.b,{exact:!0,path:"/app/",component:H}),s.a.createElement(p.b,{path:"/app/allTests",component:U}),s.a.createElement(p.b,{path:"/app/testInfo/:testId",component:V}),s.a.createElement(p.b,{path:"/app/testResult/:userId/:resultId",component:$}),s.a.createElement(p.b,{path:"/app/createTest",component:Z}),s.a.createElement(p.b,{path:"/app/createTestForm",component:ee}),s.a.createElement(p.b,{path:"/app/passTest/:testId",component:te}),s.a.createElement(p.b,{path:"/app/login",component:se}),s.a.createElement(p.b,{path:"/app/register",component:re})))))}}]),t}(n.Component),oe=(a(202),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={user:f.a.get("user"),userId:f.a.get("userId"),token:f.a.get("token"),proxy:""},a.setToken=function(e,t,n){a.setState({token:e,userId:t,user:n}),f.a.set("token",e),f.a.set("userId",t),f.a.set("user",n)},a.logout=function(){a.setState({token:"",userId:""}),f.a.set("token",""),f.a.set("userId","")},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e="";e=window.location.href.startsWith("https")?"https://easytestapp.herokuapp.com":window.location.href.startsWith("http")?"http://easytestapp.herokuapp.com":"easytestapp.herokuapp.com",console.log(e),this.setState(Object(o.a)({},this.state,{proxy:e}))}},{key:"render",value:function(){var e=this.state,t=e.token,a=e.userId,n=e.proxy,r=e.user;return console.log(Object({NODE_ENV:"production",PUBLIC_URL:""})),console.log(window.location.href),s.a.createElement(d.a,{basename:""},s.a.createElement(s.a.Fragment,null,s.a.createElement(E.a.Provider,{value:{allTests:null,results:null}},s.a.createElement(g.a.Provider,{value:{token:t,userId:a,user:r,setToken:this.setToken,logout:this.logout,proxy:n}},s.a.createElement(p.d,null,s.a.createElement(p.b,{exact:!0,path:"/",component:j}),s.a.createElement(p.b,{path:"/app",component:ce}))))))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(oe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},26:function(e,t,a){"use strict";var n=a(0),s=a.n(n);t.a=s.a.createContext({})},32:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return s}));var n=function(e){return new Date(1e3*e).toISOString().substr(11,8)},s=function(e){var t=Math.floor(e/3600),a=Math.floor((e-3600*t)/60),n=e-3600*t-60*a,s="";return t&&(s+=t.toString()+" hour".concat(1!==t?"s":""," ")),a&&(s+=a.toString()+" minute".concat(1!==a?"s":""," ")),n&&(s+=n.toString()+" second".concat(1!==n?"s":""," ")),s}},56:function(e,t,a){},57:function(e,t,a){},73:function(e,t,a){},75:function(e,t,a){e.exports=a.p+"static/media/logo1.2ad03ba9.svg"},76:function(e,t,a){e.exports=a.p+"static/media/logo-light1.dc46d8b1.svg"},77:function(e,t,a){e.exports=a.p+"static/media/hero.de877d3a.svg"},80:function(e,t,a){e.exports=a.p+"static/media/logo.dc46d8b1.svg"},84:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return E}));var n=a(1),s=a(3),r=a(4),c=a(6),o=a(5),i=a(7),l=a(0),u=a.n(l),m=a(16),h=a(85),d=a.n(h),p=a(10),v=a(18),f=(a(9),a(26)),g=u.a.lazy((function(){return a.e(3).then(a.bind(null,204))})),E=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(r)))).state={tests:[],left:0,right:3,isMoreTests:!0,isRedirectToLogin:!1},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"loadMore",value:function(){var e=this,t=this.props,a=t.urlToFetch,s=t.authContext,r=this.state,c=r.left,o=r.right,i=r.tests;console.log(i.length,"-----+++++++"),fetch(a,{method:"POST",headers:Object(n.a)({},Object(v.a)(),{"Content-Type":"application/json"}),body:JSON.stringify({isLimited:!0,left:c,right:o})}).then((function(e){return e.json()})).then((function(t){if(console.log(t),t.isTokenError)return s.logout(),e.setState(Object(n.a)({},e.state,{isRedirectToLogin:!0})),!0;t.tests.forEach((function(e){return i.push(e)})),e.context.allTests=i,e.setState(Object(n.a)({},e.state,{tests:i,left:c+3,right:o+3,isMoreTests:t.isMoreTests}),(function(){return console.log(e.state.tests)}))}))}},{key:"componentWillMount",value:function(){"full"===this.props.type&&this.context.allTests&&(console.log(this.context.allTests.length,"+-+-"),this.setState(Object(n.a)({},this.state,{tests:this.context.allTests,left:this.context.allTests.length,right:this.context.allTests.length+3})))}},{key:"render",value:function(){var e=this.props,t=e.type,a=e.user,n=this.state,s=n.isLoading,r=n.tests,c=n.isRedirectToLogin,o=n.isMoreTests;if(c)return u.a.createElement(m.a,{to:"/app/login"});if(s||!r)return u.a.createElement(p.a,null);var i=[];return r.map((function(e,n){return i.push(u.a.createElement(l.Suspense,{key:n,fallback:u.a.createElement(p.a,{size:"sm"})},u.a.createElement(g,{key:"".concat(n,"-").concat(n),type:t,test:e,user:a||null})))})),u.a.createElement(u.a.Fragment,null,u.a.createElement(d.a,{pageStart:"0",loadMore:this.loadMore.bind(this),hasMore:o,loader:u.a.createElement(p.a,null),useWindow:!1},u.a.createElement("div",{className:"tests-container"},0===i.length?"result"!==t&&u.a.createElement("h3",null,"Oops, no tests available yet!"):i)))}}]),t}(l.Component);E.contextType=f.a},86:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(3),s=a(4),r=a(6),c=a(5),o=a(7),i=a(0),l=a.n(i),u=(a(56),function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.points,a=e.maxPoints,n=t/a,s="";return s=n>=.85?"excellent":n>=.65?"good":n>=.4?"satisfactory":"bad",l.a.createElement("span",{className:"points-card ".concat(s)},t,l.a.createElement("span",{className:"divider"},"/"),a)}}]),t}(i.Component))},87:function(e,t,a){e.exports=a(203)},9:function(e,t,a){"use strict";var n=a(0),s=a.n(n);t.a=s.a.createContext({})},94:function(e,t,a){}},[[87,1,2]]]);
//# sourceMappingURL=main.051429c6.chunk.js.map
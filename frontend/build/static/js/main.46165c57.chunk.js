(window.webpackJsonpfrontend=window.webpackJsonpfrontend||[]).push([[1],[,,,,,,,,,function(e,t,a){"use strict";var n=a(0),s=a.n(n);t.a=s.a.createContext({tests:[{title:"hello"}]})},function(e,t,a){"use strict";var n=a(0),s=a.n(n);a(57);t.a=function(e){var t=e.size;console.log(t);var a="sm"===t?"small":"";return s.a.createElement("div",{className:"loader-wrapper "+a},s.a.createElement("div",{className:"loader "+a}))}},,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=function(e){var t=new Date(e),a=t.getDate(),n=t.getMonth(),s=t.getFullYear();return a+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][n]+", "+s}},function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(3),s=a(4),r=a(6),c=a(5),o=a(7),l=a(0),i=a.n(l),m=(a(58),function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.points,a=e.maxPoints,n=t/a,s="";return s=n>=.85?"excellent":n>=.65?"good":n>=.4?"satisfactory":"bad",i.a.createElement("span",{className:"points-card ".concat(s)},t,i.a.createElement("span",{className:"divider"},"/"),a)}}]),t}(l.Component))},,,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(15),s=a.n(n),r=function(){return{"x-auth-token":s.a.get("token")}}},function(e,t,a){},function(e,t,a){},,function(e,t,a){e.exports=a.p+"static/media/logo1.2ad03ba9.svg"},function(e,t,a){e.exports=a.p+"static/media/logo-light1.dc46d8b1.svg"},function(e,t,a){e.exports=a.p+"static/media/hero.de877d3a.svg"},,,function(e,t,a){e.exports=a.p+"static/media/logo.dc46d8b1.svg"},function(e,t,a){e.exports=a(66)},,,,,,,function(e,t,a){},,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(35),c=a.n(r),o=a(3),l=a(4),i=a(6),m=a(5),u=a(7),d=a(8),p=a(18),h=a(15),f=a.n(h),E=a(9),v=a(36),g=a.n(v),b=a(37),y=a.n(b),w=a(38),N=a.n(w),k=(a(49),function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("header",null,s.a.createElement("div",{className:"bg-circle-md bg-circle"}),s.a.createElement("div",{className:"bg-circle-dm bg-circle"}),s.a.createElement("div",{className:"nav"},s.a.createElement("div",{className:"nav-left"},s.a.createElement("img",{className:"light",src:g.a,alt:""}),s.a.createElement("img",{className:"dark",src:y.a,alt:""}),s.a.createElement("h1",null,"EasyTest"))),s.a.createElement("div",{className:"hero"},s.a.createElement("div",{className:"hero-left"},s.a.createElement("h1",null,"Get your experience in online testing to a whole new level!"),s.a.createElement(d.b,{className:"cta",to:"/app/"},"Try it out!")),s.a.createElement("div",{className:"hero-right"},s.a.createElement("img",{src:N.a,alt:""}))),s.a.createElement("div",{className:"copyright"},"\xa9 2020 Yegor Trussov"))}}]),t}(n.Component)),x=a(12),j=a(16),T=a(41),O=a.n(T),S=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={isLoggedIn:!1},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"logout",value:function(){this.context.logout(),window.location.href="/testing-app-frontend/app/login"}},{key:"render",value:function(){var e=f.a.get("token");console.log(e);var t=""!==e;return s.a.createElement("nav",null,s.a.createElement("div",{className:"nav-item nav-top"},s.a.createElement(d.b,{exact:!0,to:"/"},s.a.createElement("h2",{className:"logo"},s.a.createElement("img",{src:O.a,alt:""})," ",s.a.createElement("span",{className:"text"},"EasyTest")))),t&&s.a.createElement("div",{className:"nav-item nav-middle"},s.a.createElement(d.c,{exact:!0,className:"nav-link",to:"/app/"},s.a.createElement(x.a,{className:"icon",icon:j.c})," ",s.a.createElement("span",{className:"text"},"Home")),s.a.createElement(d.c,{className:"nav-link",to:"/app/allTests"},s.a.createElement(x.a,{className:"icon",icon:j.a}),s.a.createElement("span",{className:"text"}," Tests")),s.a.createElement(d.c,{className:"nav-link",to:"/app/createTest"},s.a.createElement(x.a,{className:"icon",icon:j.d})," ",s.a.createElement("span",{className:"text"},"Create Test"))),s.a.createElement("div",{className:"nav-item nav-bottom"},!t&&s.a.createElement(s.a.Fragment,null,s.a.createElement(d.c,{className:"nav-link",to:"/app/login"},s.a.createElement(x.a,{className:"icon",icon:j.e})," ",s.a.createElement("span",{className:"text"},"Login")),s.a.createElement(d.c,{className:"nav-link",to:"/app/register"},s.a.createElement(x.a,{className:"icon",icon:j.g})," ",s.a.createElement("span",{className:"text"},"Register"))),t&&s.a.createElement("button",{className:"nav-link",onClick:this.logout.bind(this)},s.a.createElement(x.a,{className:"icon",icon:j.f})," ",s.a.createElement("span",{className:"text"},"Logout"))))}}]),t}(n.Component);S.contextType=E.a;var L=S,I=a(10),A=a(32),C=a(24),q=a(25),P=(a(59),s.a.lazy((function(){return a.e(0).then(a.bind(null,70))}))),D=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={user:null,passedTests:[],avgResult:null,isLoading:!0,nextLinkVal:null},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(this.context.proxy,"/api/users/user"),{headers:Object(A.a)()}).then((function(e){return e.json()})).then((function(t){t.isTokenError&&(e.context.logout(),window.location.href="/app/login"),console.log(t.passedTests),t.passedTests.reverse();var a=0;t.passedTests.forEach((function(e){a+=e.points/e.maxPoints,console.log(a)})),a/=t.passedTests.length,a=Math.floor(100*a),e.setState({user:t,avgResult:a,isLoading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.user,a=e.isLoading,r=e.avgResult;console.log(t);if(a||!t)return s.a.createElement(I.a,null);var c="".concat(this.context.proxy,"/api/tests/passedTests/").concat(t._id);return s.a.createElement("div",null,s.a.createElement("h1",{className:"heading"},"Hello, ",t.name,"!"),s.a.createElement("div",{className:"profile-block"},s.a.createElement("div",{className:"profile-img"},s.a.createElement("img",{src:"/img/profile-img.svg",alt:""})),s.a.createElement("div",{className:"profile-info"},s.a.createElement("div",{className:"profile-info__block"},s.a.createElement("span",{className:"info-text"},"Name: ",t.name)),s.a.createElement("div",{className:"profile-info__block"},s.a.createElement("span",{className:"info-text"},"Tests passed: ",t.passedTests.length)),s.a.createElement("div",{className:"profile-info__block"},s.a.createElement("span",{className:"info-text"},"Average result: ",r,"%")))),t.passedTests.length>0?s.a.createElement("h2",null,"Your recent tests: "):s.a.createElement("h2",null,"You haven't passed any tests yet!"),s.a.createElement(n.Suspense,{fallback:s.a.createElement(I.a,null)},s.a.createElement(P,{type:"result",urlToFetch:c,user:t})))}}]),t}(n.Component);D.contextType=E.a;a(33);var M=s.a.lazy((function(){return a.e(0).then(a.bind(null,70))})),_=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={isLoading:!1,tests:[],isRedirectToLogin:!1,left:0,right:3,isMoreTests:!0},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.isLoading,a=(e.tests,e.isRedirectToLogin),r=e.isMoreTests;console.log(r);var c="".concat(this.context.proxy,"/api/tests/allTests");return a?s.a.createElement(p.a,{to:"/app/login"}):t?s.a.createElement(I.a,null):s.a.createElement(s.a.Fragment,null,s.a.createElement("h1",{className:"heading"},"Available tests: "),s.a.createElement(n.Suspense,{fallback:s.a.createElement(I.a,null)},s.a.createElement(M,{urlToFetch:c,type:"full"})))}}]),t}(n.Component);_.contextType=E.a;var F=a(1),R=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={isLoading:!0,test:null,testResults:null,usernames:null,errors:[]},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.testId,a=document.querySelector("span.field");console.log(a),null!==a&&a&&a.addEventListener("keypress",(function(e){13===e.which&&e.preventDefault()})),fetch("".concat(this.context.proxy,"/api/tests/testInfo/").concat(t)).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({isLoading:!1,test:t})})),fetch("".concat(this.context.proxy,"/api/tests/testResults/").concat(t)).then((function(e){return e.json()})).then((function(t){console.log(t),t.testResults.sort((function(e,t){return t.points-e.points})),e.setState({isLoading:!1,testResults:t.testResults,usernames:t.usernames})}))}},{key:"setAccessKey",value:function(e){this.setState(Object(F.a)({},this.state,{currentAccessKey:e.target.innerText}))}},{key:"goToTest",value:function(){var e=this,t=this.state,a=t.test,n=t.errors,s=t.testResults,r=a.maxAttempts,c=0;if(s.forEach((function(t){t.userId===e.context.userId&&c++})),console.log(c,r),r&&c>=r)n.attempts="You have not got any attempts left!",this.setState(Object(F.a)({},this.state,{errors:n}));else{var o=this.state.currentAccessKey,l=a.accessKey,i=a._id,m=a.isProtected;if(l!==o&&m){var u=this.state.errors;u.keyError="Incorrect access key!",this.setState(Object(F.a)({},this.state,{errors:u}))}else window.location.href="/app/passTest/".concat(i)}}},{key:"componentDidUpdate",value:function(){var e=document.querySelector("span.field");console.log(e),e&&null!==e&&e.addEventListener("keypress",(function(e){13===e.which&&e.preventDefault()}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoading,n=t.test,r=t.testResults,c=t.errors;if(a||null===n)return s.a.createElement(I.a,null);var o=n.maxAttempts,l=n.timeLimit,i=0;r&&r.forEach((function(t){t.userId===e.context.userId&&i++}));var m=o-i;return s.a.createElement("div",null,s.a.createElement("div",{className:"page-top"},s.a.createElement(d.b,{to:"/app/allTests"},s.a.createElement(x.a,{icon:j.b})," Back")),s.a.createElement("h1",null,n.title),s.a.createElement("p",null,n.description),n.isProtected&&s.a.createElement(s.a.Fragment,null,s.a.createElement("br",null),s.a.createElement("label",{htmlFor:"title"},"To start the test, you need to type in the secret key!")," ",s.a.createElement("br",null),s.a.createElement("span",{id:"field",className:"field",contenteditable:"true",onInput:function(t){return e.setAccessKey(t)},type:"text",name:"title"}),s.a.createElement("span",{className:"error-input"},c.keyError)),o&&s.a.createElement("div",{className:"attempts-block"},s.a.createElement("span",{className:"max-attemtts"},"Attempts left: ",m)),l&&s.a.createElement("div",{className:"attempts-block"},s.a.createElement("span",{className:"max-attemtts"},"Time limit: ",function(e){var t=Math.floor(e/3600),a=Math.floor((e-3600*t)/60),n=e-3600*t-60*a,s="";return t&&(s+=t.toString()+" hour".concat(1!==t?"s":""," ")),a&&(s+=a.toString()+" minute".concat(1!==a?"s":""," ")),n&&(s+=n.toString()+" second".concat(1!==n?"s":""," ")),s}(l))),s.a.createElement("br",null),s.a.createElement("div",{className:"btn-block"},s.a.createElement("span",{className:"error-input"},c.attempts),s.a.createElement("button",{onClick:function(){return e.goToTest()},className:"btn btn-cta"},"Pass test!")),s.a.createElement("div",{className:"results"},s.a.createElement("h3",null,"Results: "),s.a.createElement("table",null,s.a.createElement("col",{className:"username"}),s.a.createElement("col",{className:"points"}),s.a.createElement("tr",null,s.a.createElement("th",null,"User"),s.a.createElement("th",{className:"points"},"Points")),null===r?function(){return s.a.createElement(I.a,null)}:r.map((function(e){return s.a.createElement("tr",{className:"resultTr",key:e.userId+e.points},s.a.createElement("td",null,e.username),s.a.createElement("td",{className:"points"},s.a.createElement(q.a,{points:e.points,maxPoints:e.answers.length})))})))))}}]),t}(n.Component);R.contextType=E.a;var B=a(22),H=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={createdTests:[],isLoading:!0},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.context.userId||(window.location.href="/app/login"),fetch("".concat(this.context.proxy,"/api/tests/createdTests/").concat(this.context.userId)).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({createdTests:t,isLoading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.createdTests;return e.isLoading?s.a.createElement(I.a,null):s.a.createElement("div",null,s.a.createElement("h1",{className:"heading"},"Currently, you have ",t.length," created tests"),s.a.createElement(d.b,{to:"/app/createTestForm",className:"btn btn-cta"},"New test"),s.a.createElement("div",{className:"tests-container"},t.map((function(e){var t="/app/testInfo/".concat(e._id);return s.a.createElement(d.b,{to:t},s.a.createElement("div",{class:"test-card"},s.a.createElement("h3",{class:"test-card__title"},e.title),s.a.createElement("h4",{class:"test-card__subject"},e.subject),s.a.createElement("div",{class:"test-card__btns"},s.a.createElement("div",{class:"btns-btn left"}," ",s.a.createElement(x.a,{className:"icon",icon:B.b})," ",s.a.createElement("span",null,"0")," "),s.a.createElement("div",{class:"btns-btn right"},s.a.createElement(x.a,{className:"icon",icon:B.d})," ",s.a.createElement("span",null,e.results.length)," ")),s.a.createElement("h4",{class:"test-card__date"},Object(C.a)(e.createdAt))))}))))}}]),t}(n.Component);H.contextType=E.a;a(60);var U=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={isLoading:!0,test:null,answers:null},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.userId,a=this.props.match.params.resultId;fetch("".concat(this.context.proxy,"/api/tests/testResult/").concat(t,"/").concat(a)).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({isLoading:!1,answers:t.answers,test:t.test})}))}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.test,n=e.answers;return a&&console.log(a.questions[0]),console.log(n),t?s.a.createElement(I.a,null):s.a.createElement("div",null,s.a.createElement("div",{className:"page-top"},s.a.createElement(d.b,{to:"/app/"},s.a.createElement(x.a,{className:"icon",icon:j.b})," Back")),s.a.createElement("h1",{className:"heading"},'Test result for "',a.title,'"'),s.a.createElement("div",{className:"result-table"},s.a.createElement("table",null,s.a.createElement("col",{className:"main"}),n.map((function(e){return s.a.createElement("col",{className:"answer"})})),s.a.createElement("tr",{className:"first"},s.a.createElement("th",{className:"first main"},"Question No."),n.map((function(e,t){return s.a.createElement("th",{className:"first ans"},t+1)}))),s.a.createElement("tr",null,s.a.createElement("th",{className:"main"},"Result: "),n.map((function(e,t){var n="";console.log(toString(e));var r=e.toString()===a.questions[t].correctAnswerId;return n=parseInt(e)===parseInt(a.questions[t].correctAnswerId)?"correct":"wrong",s.a.createElement("th",{className:"answerr ans ".concat(n)},r?s.a.createElement(x.a,{className:"icon",icon:B.a}):s.a.createElement(x.a,{className:"icon",icon:B.c}))}))))),n.map((function(e,t){var n=e.toString()===a.questions[t].correctAnswerId;console.log(a.questions);var r="";n||(r="wrong");var c=a.questions[t];return console.log(c.answers[parseInt(c.correctAnswerId)]),s.a.createElement("div",{className:"question-ans"},s.a.createElement("h3",null,t+1,". ",c.title),0===e?s.a.createElement("span",{className:"ans-text "+r},"Your answer: -"):s.a.createElement("span",{className:"ans-text "+r},"Your answer: ",e,") ",c.answers[e-1].text),s.a.createElement("span",{className:"ans-text"},"Correct answer: ",c.correctAnswerId,") ",c.answers[parseInt(c.correctAnswerId)-1].text))})))}}]),t}(n.Component);U.contextType=E.a;a(61);var Q=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={questions:[{title:"",answers:[{text:"",answerId:"1"},{text:"",answerId:"2"}],correctAnswerId:"1"}],title:"",description:"",subject:"",isProtected:!1,accessKey:"",creator:a.context.userId,timeErrorMsg:"",isLoading:!1,errors:[],maxAttempts:null,isLimitedAttempts:!1,isLimitedTime:!1,timeLimit:null},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e,t,a,n,s,r,c=this;e=document.getElementsByClassName("custom-select"),console.log(e);var o=[300,600,1200,1800,3600,5400],l=function(e){console.log("hhhh"),c.setState(Object(F.a)({},c.state,{timeLimit:o[e-1]}),(function(){return console.log(c.state)}))};for(t=0;t<e.length;t++){a=e[t].getElementsByTagName("select")[0],(n=document.createElement("DIV")).setAttribute("class","select-selected"),n.innerHTML=a.options[a.selectedIndex].innerHTML,e[t].appendChild(n),(s=document.createElement("DIV")).setAttribute("class","select-items select-hide");for(var i=function(e){(r=document.createElement("DIV")).innerHTML=a.options[e].innerHTML,console.log(a),r.addEventListener("click",(function(t){var a,n,s,r,c;for(r=this.parentNode.parentNode.getElementsByTagName("select")[0],c=this.parentNode.previousSibling,console.log(o[e-1]),n=0;n<r.length;n++)if(r.options[n].innerHTML===this.innerHTML){for(r.selectedIndex=n,c.innerHTML=this.innerHTML,a=this.parentNode.getElementsByClassName("same-as-selected"),s=0;s<a.length;s++)a[s].removeAttribute("class");this.setAttribute("class","same-as-selected");break}c.click(),l(e)})),s.appendChild(r)},m=1;m<a.length;m++)i(m);e[t].appendChild(s),n.addEventListener("click",(function(e){e.stopPropagation(),u(this),this.nextSibling.classList.toggle("select-hide"),this.classList.toggle("select-arrow-active")}))}function u(e){var t,a,n,s=[];for(t=document.getElementsByClassName("select-items"),a=document.getElementsByClassName("select-selected"),n=0;n<a.length;n++)e===a[n]?s.push(n):a[n].classList.remove("select-arrow-active");for(n=0;n<t.length;n++)s.indexOf(n)&&t[n].classList.add("select-hide")}document.addEventListener("click",u)}},{key:"handleAddAnswer",value:function(e){var t=this.state.questions,a=t[e].answers.length;console.log(a.toString()),6!==t[e].answers.length&&(t[e].answers.push({text:"",answerId:(a+1).toString()}),console.log(t[e].answers),this.setState(Object(F.a)({},this.state,{questions:t})))}},{key:"handleAddQuestion",value:function(){var e=this.state.questions;20!==e.length&&(e.push({title:"",answers:[{text:"",answerId:"1"},{text:"",answerId:"2"}],correctAnswerId:"1"}),this.setState(Object(F.a)({},this.state,{questions:e})))}},{key:"setQuestionTitle",value:function(e,t){var a=this.state.questions;a[t].title=e.target.innerText,this.setState(Object(F.a)({},this.state,{questions:a}))}},{key:"setAnswerText",value:function(e,t,a){console.log(e.target.innerText);var n=this.state.questions;console.log(n[t].answers,a),n[t].answers[a].text=e.target.innerText,this.setState(Object(F.a)({},this.state,{questions:n}))}},{key:"setTestTitle",value:function(e){this.setState(Object(F.a)({},this.state,{title:e.target.innerText}))}},{key:"setTestDescription",value:function(e){this.setState(Object(F.a)({},this.state,{description:e.target.value}))}},{key:"setTestSubject",value:function(e){var t=this;this.setState(Object(F.a)({},this.state,{subject:e.target.innerText}),(function(){return console.log(t.state.subject)}))}},{key:"setProtectedState",value:function(e){this.setState(Object(F.a)({},this.state,{isProtected:!this.state.isProtected,accessKey:""}))}},{key:"setAttemptsState",value:function(e){this.setState(Object(F.a)({},this.state,{isLimitedAttempts:!this.state.isLimitedAttempts,maxAttempts:1}))}},{key:"setTimeLimitState",value:function(e){this.setState(Object(F.a)({},this.state,{isLimitedTime:!this.state.isLimitedTime,timeLimit:null}))}},{key:"setAccessKey",value:function(e){this.setState(Object(F.a)({},this.state,{accessKey:e.target.innerText}))}},{key:"setAttemptsNumber",value:function(e){this.setState(Object(F.a)({},this.state,{maxAttempts:parseInt(e.target.value)})),console.log(this.state)}},{key:"changeAttemptsNumber",value:function(e){var t=this.state.maxAttempts;t=e>0?Math.min(t+e,10):Math.max(t+e,1),this.setState(Object(F.a)({},this.state,{maxAttempts:t}))}},{key:"setCorrectAnswerId",value:function(e,t){var a=this.state.questions;a[e].correctAnswerId=t,console.log(t),this.setState(Object(F.a)({},this.state,{questions:a}))}},{key:"handleAddTest",value:function(){var e=this;this.setState(Object(F.a)({},this.state,{isLoading:!0}));var t=this.state;console.log(this.state);var a=[];t.title||(a.title="The test must have a title"),t.subject||(a.subject="The test must have a subject"),t.questions.map((function(e){return e.title||(a.questions="Questions must not be empty"),e.answers.map((function(e){return e.text||(a.answers="Answers must not be empty"),!0})),!0})),a.title||a.subject||a.questions||a.answers?this.setState(Object(F.a)({},this.state,{errors:a})):(this.context.userId||(window.location.href="/app/login"),fetch("".concat(this.context.proxy,"/api/tests/createTest"),{method:"POST",headers:{"Content-Type":"application/json","x-auth-token":this.context.token},body:JSON.stringify(this.state)}).then((function(e){return e.json()})).then((function(t){console.log(t),t.success?window.location.href="/app/allTests":t.isTimeErr&&e.setState(Object(F.a)({},e.state,{timeErrorMsg:"You cannot create more than 1 test in 5 minutes!",isLoading:!1}))})))}},{key:"deleteAnswer",value:function(e,t){var a=this.state.questions;if(!(a[e].answers.length<=2)){var n=parseInt(t);a[e].correctAnswerId.toString()===(t+1).toString()&&(0===t?a[e].correctAnswerId="1":(console.log("fff"),a[e].correctAnswerId=t.toString()));for(var s=n;s<a[e].answers.length;s++)a[e].answers[s].answerId=(parseInt(a[e].answers[s].answerId)-1).toString(),s!==n&&(document.getElementById("_".concat(e,"-").concat(s-1)).innerText=a[e].answers[s].text);console.log(t),a[e].answers.splice(t,1),console.log(a[e].answers),this.setState(Object(F.a)({},this.state,{questions:a}))}}},{key:"deleteQuestion",value:function(e){var t=this.state.questions;1!==t.length&&(t.splice(e,1),this.setState(Object(F.a)({},this.state,{questions:t})))}},{key:"render",value:function(){var e=this,t=this.state,a=t.questions,n=t.isProtected,r=t.timeErrorMsg,c=t.isLoading,o=t.title,l=t.errors,i=t.isLimitedAttempts,m=t.isLimitedTime,u=t.maxAttempts;console.log(u);var d=["A","B","C","D","E","F"];return s.a.createElement("div",null,s.a.createElement("h1",{className:"heading"},"Create test"),s.a.createElement("div",{className:"test-basic-info"},s.a.createElement("div",{className:"info-group"},s.a.createElement("label",{htmlFor:"title"},"Test name: "),s.a.createElement("span",{value:o,className:"field",contenteditable:"true",onInput:function(t){return e.setTestTitle(t)},type:"text",name:"title"}),s.a.createElement("span",{className:"error-input"},l.title)),s.a.createElement("div",{className:"info-group"},s.a.createElement("label",{htmlFor:"subject"},"Subject: "),s.a.createElement("span",{className:"field",contenteditable:"true",onInput:function(t){return e.setTestSubject(t)},type:"text",name:"subject"}," "),s.a.createElement("span",{className:"error-input"},l.subject)),s.a.createElement("div",{className:"info-group"},s.a.createElement("label",{htmlFor:"description"},"Description: "),s.a.createElement("textarea",{className:"",onChange:function(t){return e.setTestDescription(t)},name:"description",id:"",cols:"30",rows:"10"})),s.a.createElement("div",{className:"info-group-checkbox"},s.a.createElement("input",{onChange:this.setProtectedState.bind(this),type:"checkbox",name:"isProtected"}),s.a.createElement("label",{htmlFor:"isProtected",name:"isProtected"},"Protected")),n&&s.a.createElement("div",{className:"info-group"},s.a.createElement("label",{htmlFor:"key"},"Secret key: "),s.a.createElement("span",{class:"field",contenteditable:"true",onInput:function(t){return e.setAccessKey(t)},name:"key"}," ")),s.a.createElement("div",{className:"info-group-checkbox"},s.a.createElement("input",{onChange:this.setAttemptsState.bind(this),type:"checkbox",name:"isLimitedAttempts"}),s.a.createElement("label",{htmlFor:"isLimitedAttempts",name:"isLimitedAttempts"},"Limited attempts")),i&&s.a.createElement("div",{className:"info-group"},s.a.createElement("label",{htmlFor:"key"},"Maximum attempts: "),s.a.createElement("div",{className:"btn-group"},s.a.createElement("button",{className:"increment-btn",onClick:function(){return e.changeAttemptsNumber(-1)}}," ",s.a.createElement("span",null,"-")," "),s.a.createElement("span",{className:"attempts-num"},u),s.a.createElement("button",{className:"increment-btn",onClick:function(){return e.changeAttemptsNumber(1)}}," ",s.a.createElement("span",null,"+")," "))),s.a.createElement("div",{className:"info-group-checkbox"},s.a.createElement("input",{onChange:this.setTimeLimitState.bind(this),type:"checkbox",name:"isLimitedTime"}),s.a.createElement("label",{htmlFor:"isLimitedTime",name:"isLimitedTime"},"Limited time")),m?s.a.createElement("div",{className:"custom-select",style:{width:"300px"}},s.a.createElement("select",null,s.a.createElement("option",{value:"0"},"Select time limit:"),s.a.createElement("option",{value:"1"},"5 minutes"),s.a.createElement("option",{value:"2"},"10 minutes"),s.a.createElement("option",{value:"3"},"20 minuted"),s.a.createElement("option",{value:"4"},"30 minutes"),s.a.createElement("option",{value:"5"},"1 hour"),s.a.createElement("option",{value:"6"},"1.5 hours"))):s.a.createElement("div",{className:"custom-select",style:{width:"300px",visibility:"hidden"}},s.a.createElement("select",null,s.a.createElement("option",{value:"0"},"Select time limit:"),s.a.createElement("option",{value:"1"},"5 minutes"),s.a.createElement("option",{value:"2"},"10 minutes"),s.a.createElement("option",{value:"3"},"20 minuted"),s.a.createElement("option",{value:"4"},"30 minutes"),s.a.createElement("option",{value:"5"},"1 hour"),s.a.createElement("option",{value:"6"},"1.5 hours")))),s.a.createElement("div",{className:"questions"},a.map((function(t,a){return s.a.createElement("div",{className:"question-card"},s.a.createElement("button",{onClick:function(){return e.deleteQuestion(a)},className:"btn-delete"},s.a.createElement("span",null,"\xd7")),s.a.createElement("label",{className:"title"},s.a.createElement("span",null,a+1,".")," "),s.a.createElement("span",{className:"input",contenteditable:"true",type:"text",onInput:function(t){return e.setQuestionTitle(t,a)}}),s.a.createElement("div",{className:"answers"},t.answers.map((function(n,r){return s.a.createElement("div",{className:"ans-card"},s.a.createElement("button",{onClick:function(){return e.deleteAnswer(a,r)},className:"btn-delete"},s.a.createElement("span",null,"\xd7")),s.a.createElement("input",{type:"radio",id:"".concat(a,"-").concat(r),name:a,title:"Mark as correct",onChange:function(){return e.setCorrectAnswerId(a,n.answerId)},checked:t.correctAnswerId===n.answerId}),s.a.createElement("label",{htmlFor:"".concat(a,"-").concat(r)}),s.a.createElement("span",{className:"ans-letter"},d[r],") "),s.a.createElement("span",{id:"_".concat(a,"-").concat(r),className:"input",contenteditable:"true",onInput:function(t){return e.setAnswerText(t,a,r)},type:"text"}))})),s.a.createElement("button",{onClick:e.handleAddAnswer.bind(e,a),className:"add-question"},s.a.createElement("span",null,"+"))))})),s.a.createElement("button",{onClick:this.handleAddQuestion.bind(this),className:"new-question btn-secondary"},"New question")),r&&s.a.createElement("span",{className:"error-msg"},r),l.questions&&s.a.createElement("span",{className:"error-msg"},l.questions),l.answers&&s.a.createElement("span",{className:"error-msg"},l.answers),s.a.createElement("button",{onClick:this.handleAddTest.bind(this),className:"btn btn-cta"},"Create test!"),c&&s.a.createElement(I.a,{size:"sm"}))}}]),t}(n.Component);Q.contextType=E.a;a(62);var K=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={isLoading:!0,test:[],answers:[],answeredQuestions:0,isSubmitted:!1,isTimeUp:!1,time:null},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.testId;fetch("".concat(this.context.proxy,"/api/tests/testInfo/").concat(t)).then((function(e){return e.json()})).then((function(t){console.log(t);for(var a=[],n=0;n<t.questions.length;n++)a[n]=0;if(e.setState({isLoading:!1,answers:a,test:t}),t.timeLimit){var s=t.timeLimit;setInterval((function(){s=Math.max(s-1,0);var t=e.state.isTimeUp;!t&&s<=0&&(t=!0,document.querySelectorAll("input[type='radio']").forEach((function(e){e.setAttribute("onChange","return false"),e.setAttribute("onClick","return false")})));e.setState(Object(F.a)({},e.state,{isTimeUp:t,time:s}))}),1e3)}}))}},{key:"handleSelect",value:function(e,t){var a=this,n=this.state,s=n.answers,r=n.answeredQuestions;n.isTimeUp||(s[e]||r++,s[e]=t,this.setState(Object(F.a)({},this.state,{answers:s,answeredQuestions:r}),(function(){return console.log(a.state)})))}},{key:"finishTest",value:function(e){e.preventDefault();var t=0,a=[],n=this.state,s=n.answers,r=n.test;if(!n.isSubmitted){this.setState(Object(F.a)({},this.state,{isSubmitted:!0})),console.log("finish!"),r.questions.map((function(e,n){return e.correctAnswerId===s[n]?(t++,a.push(!0)):a.push(!1),e}));var c={userId:this.context.userId,points:t,answers:a,title:r.title,maxPoints:r.questions.length,date:Date.now(),answersLetters:s};fetch("".concat(this.context.proxy,"/api/tests/saveResult/").concat(r._id),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then((function(){console.log("result saved!"),window.location.href="/app/testInfo/".concat(r._id)}))}}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoading,n=t.test,r=t.answeredQuestions,c=t.time,o=t.answers,l=n.questions,i=["A","B","C","D","E","F","G","H"];return a?s.a.createElement(I.a,null):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"info-block"},s.a.createElement("div",null,n.timeLimit&&s.a.createElement("span",null,"Time left: ",new Date(1e3*c).toISOString().substr(11,8))),s.a.createElement("div",null,"Answered questions: ",r," / ",l.length)),s.a.createElement("form",{className:"test-form",onSubmit:function(t){return e.finishTest(t)}},s.a.createElement("h1",{className:"heading"},"Pass test '",n.title,"'"),s.a.createElement("div",{className:"test-questions"},l.map((function(t,a){return s.a.createElement("div",{className:"question-container"},s.a.createElement("h3",{class:"question-container__title"},a+1,".  ",t.title),s.a.createElement("div",{className:"question-container__answers"},t.answers.map((function(n,r){"".concat(t,"-").concat(r);var c="";return console.log(o),console.log(o[a].toString()===(r+1).toString()),o[a].toString()===(r+1).toString()&&(c="selected"),s.a.createElement("div",{className:"answer-block "+c,onClick:e.handleSelect.bind(e,a,n.answerId)},s.a.createElement("div",{className:"answer-block__letter"},s.a.createElement("span",null,i[r])),s.a.createElement("div",{className:"answer-block__text"},s.a.createElement("span",null,n.text)))}))))}))),s.a.createElement("input",{type:"submit",className:"btn btn-cta",value:"Finish"})))}}]),t}(n.Component);K.contextType=E.a;var J=a(21),Y=(a(34),function(e){var t=[];return e.forEach((function(e){"email"===e.name&&(/^\w+([-]?\w+)*@\w+([-]?\w+)*(\.\w{2,3})+$/.test(e.value)||(t.email="Invalid email")),"password"===e.name&&e.value.length<6&&(t.password="Password must be at least 6 characters"),"fullName"===e.name&&e.value.trim().length<=5&&(t.fullName="Please enter a real full name")})),t}),z=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={email:"",password:"",errors:[],isLoading:!1},a.formEl=s.a.createRef(),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=document.querySelector("#psw"),t=document.querySelector("#email");e.addEventListener("focus",(function(e){}),!1),e.addEventListener("keyup",(function(e){console.log(e.keyCode)}),!1),t.addEventListener("keypress",(function(e){13===e.which&&e.preventDefault()}),!1),e.addEventListener("keypress",(function(e){13===e.which&&e.preventDefault()}),!1)}},{key:"setCredential",value:function(e){var t=this;console.log(e.target),this.setState(Object(F.a)({},this.state,Object(J.a)({},e.target.getAttribute("data-name"),e.target.innerHTML)),(function(){return console.log(t.state)}))}},{key:"setLoading",value:function(e){var t=this;this.setState({isLoading:e},(function(){return console.log(t.state)}))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=[{name:"email",value:this.state.email},{name:"password",value:this.state.password}],n=Y(a);if(console.log(n.email),n.email||n.password)this.setState(Object(F.a)({},this.state,{errors:n,isLoading:!1}));else{n=[];var s={email:this.state.email,password:this.state.password};fetch("".concat(this.context.proxy,"/api/users/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(e){e.success?(t.context.setToken(e.token,e.user._id),window.location.href="/app/"):(e.doesUserExist?n.password="Incorrect password":n.email="User does not exist!",t.setState(Object(F.a)({},t.state,{errors:n,isLoading:!1})))}))}}},{key:"render",value:function(){var e=this,t=this.state,a=t.errors,n=t.isLoading;return console.log(n),s.a.createElement("div",null,s.a.createElement("h1",{className:"heading"},"Log in"),s.a.createElement("form",{id:"login-form",onSubmit:function(t){return e.handleSubmit(t)}},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:""},"E-mail: "),s.a.createElement("span",{"data-name":"email",onInput:function(t){return e.setCredential(t)},className:"field",contentEditable:"true",id:"email"}),s.a.createElement("span",{className:"error-input"},a.email)),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:""},"Password: "),s.a.createElement("span",{"data-name":"password",onInput:function(t){return e.setCredential(t)},id:"psw",className:"field with-input",contentEditable:"true"}),s.a.createElement("span",{className:"error-input"},a.password)),s.a.createElement("input",{onClick:function(){return e.setLoading(!0)},type:"submit",className:"btn btn-cta",value:"Log in"}),n&&s.a.createElement(I.a,{size:"sm"})))}}]),t}(n.Component);z.contextType=E.a;var V=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={email:"",password:"",confirmPassword:"",name:"",errors:[],isLoading:!1},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=document.querySelector("#password"),t=document.querySelector("#confirmPassword"),a=document.querySelector("#email");e.addEventListener("focus",(function(e){}),!1),e.addEventListener("keyup",(function(e){console.log(e.keyCode)}),!1),t.addEventListener("focus",(function(e){}),!1),t.addEventListener("keyup",(function(e){console.log(e.keyCode)}),!1),a.addEventListener("keypress",(function(e){13===e.which&&e.preventDefault()}),!1),document.querySelectorAll(".field").forEach((function(e){e.addEventListener("keypress",(function(e){13===e.which&&e.preventDefault()}))})),e.addEventListener("keypress",(function(e){13===e.which&&e.preventDefault()}),!1),t.addEventListener("keypress",(function(e){13===e.which&&e.preventDefault()}),!1)}},{key:"setCredential",value:function(e){this.setState(Object(J.a)({},e.target.id,e.target.innerHTML))}},{key:"setLoading",value:function(e){var t=this;this.setState({isLoading:e},(function(){return console.log(t.state)}))}},{key:"registerUser",value:function(e){var t=this;e.preventDefault();var a=[{name:"email",value:this.state.email},{name:"password",value:this.state.password},{name:"fullName",value:this.state.name}],n=Y(a);if(this.state.password!==this.state.confirmPassword&&(n.confirmPassword="Passwords do not match"),n.email||n.password||n.fullName||n.confirmPassword)this.setState(Object(F.a)({},this.state,{errors:n,isLoading:!1}));else{var s={email:this.state.email,password:this.state.password,name:this.state.name};if(this.state.confirmPassword!==s.password)return;fetch("".concat(this.context.proxy,"/api/users/addUser"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(e){console.log(e),e.notSuccess?((n=[]).email="User with such email already exists",t.setState(Object(F.a)({},t.state,{errors:n,isLoading:!1}))):(t.context.setToken(e.token,e.user._id),window.location.href="/app/")}))}}},{key:"render",value:function(){var e=this,t=this.state,a=t.errors,n=t.isLoading;return s.a.createElement(s.a.Fragment,null,s.a.createElement("h1",{className:"heading"},"Register"),s.a.createElement("form",{onSubmit:function(t){return e.registerUser(t)}},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:""},"E-mail: "),s.a.createElement("span",{onInput:function(t){return e.setCredential(t)},contenteditable:"true",className:"field",type:"text",name:"",id:"email"}),s.a.createElement("span",{className:"error-input"},a.email)),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:""},"Full name: "),s.a.createElement("span",{onInput:function(t){return e.setCredential(t)},contenteditable:"true",className:"field",type:"text",name:"",id:"name"}),s.a.createElement("span",{className:"error-input"},a.fullName)),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:""},"Password: "),s.a.createElement("span",{onInput:function(t){return e.setCredential(t)},contenteditable:"true",className:"field",type:"text",name:"",id:"password"}),s.a.createElement("span",{className:"error-input"},a.password)),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:""},"Confirm password: "),s.a.createElement("span",{onInput:function(t){return e.setCredential(t)},contenteditable:"true",className:"field",type:"text",name:"",id:"confirmPassword"}),s.a.createElement("span",{className:"error-input"},a.confirmPassword)),s.a.createElement("input",{onClick:function(){return e.setLoading(!0)},type:"submit",className:"btn btn-cta",value:"Create account"}),n&&s.a.createElement(I.a,{size:"sm"})))}}]),t}(n.Component);V.contextType=E.a;a(63),a(64);var W=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=document.querySelector("main");console.log("Hello"),setInterval((function(){window.lastScrollTime&&(new Date).getTime()<window.lastScrollTime+500?e.classList.contains("on-scroll-bar")||e.classList.add("on-scroll-bar"):e.classList.contains("on-scroll-bar")&&e.classList.remove("on-scroll-bar")}),10),e.addEventListener("scroll",(function(e){window.lastScrollTime=(new Date).getTime()}),!1)}},{key:"render",value:function(){return s.a.createElement(d.a,null,s.a.createElement("div",{className:"app-container"},s.a.createElement(L,null),s.a.createElement("main",null,s.a.createElement(p.d,null,s.a.createElement(p.b,{exact:!0,path:"/app/",component:D}),s.a.createElement(p.b,{path:"/app/allTests",component:_}),s.a.createElement(p.b,{path:"/app/testInfo/:testId",component:R}),s.a.createElement(p.b,{path:"/app/testResult/:userId/:resultId",component:U}),s.a.createElement(p.b,{path:"/app/createTest",component:H}),s.a.createElement(p.b,{path:"/app/createTestForm",component:Q}),s.a.createElement(p.b,{path:"/app/passTest/:testId",component:K}),s.a.createElement(p.b,{path:"/app/login",component:z}),s.a.createElement(p.b,{path:"/app/register",component:V})))))}}]),t}(n.Component),G=(a(65),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={userId:f.a.get("userId"),token:f.a.get("token"),proxy:window.location.href.startsWith("http://")?"http://localhost:5000":"https://testing-app-easytest.herokuapp.com"},a.setToken=function(e,t){a.setState({token:e,userId:t}),f.a.set("token",e),f.a.set("userId",t)},a.logout=function(){a.setState({token:"",userId:""}),f.a.set("token",""),f.a.set("userId","")},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.token,a=e.userId,n=e.proxy;return console.log(Object({NODE_ENV:"production",PUBLIC_URL:"/testing-app-frontend"})),console.log(window.location.href),s.a.createElement(d.a,{basename:"/testing-app-frontend"},s.a.createElement(s.a.Fragment,null,s.a.createElement(E.a.Provider,{value:{token:t,userId:a,setToken:this.setToken,logout:this.logout,proxy:n}},s.a.createElement(p.d,null,s.a.createElement(p.b,{exact:!0,path:"/",component:k}),s.a.createElement(p.b,{path:"/app",component:W})))))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[42,2,3]]]);
//# sourceMappingURL=main.46165c57.chunk.js.map